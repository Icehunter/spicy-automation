def runCLI(Map args) {
  withCredentials([usernamePassword(credentialsId: args.account.jenkinsAwsCredentialsId, usernameVariable: 'AWS_ACCESS_KEY_ID', passwordVariable: 'AWS_SECRET_ACCESS_KEY')]) {
    return sh(
      script: """#!/bin/bash +x
        set -e
        export AWS_DEFAULT_REGION=${args.account.region}
        set -x
        ${args.command}
        set +x
      """,
      returnStdout: true
    ).trim()
  }
}

def getECSInstanceSizes() {
  // SA expressions can only contain up to 125 entries so use put() individually.
  def instanceSizes = [:]

  instanceSizes.put("a1.2xlarge", [16384, 8192])
  instanceSizes.put("a1.4xlarge", [32768, 16384])
  instanceSizes.put("a1.large", [4096, 2048])
  instanceSizes.put("a1.medium", [2048, 1024])
  instanceSizes.put("a1.metal", [32768, 16384])
  instanceSizes.put("a1.xlarge", [8192, 4096])
  // instanceSizes.put("c1.medium", [1740, 2048])
  // instanceSizes.put("c1.xlarge", [7168, 8192])
  // instanceSizes.put("c3.2xlarge", [15360, 8192])
  // instanceSizes.put("c3.4xlarge", [30720, 16384])
  // instanceSizes.put("c3.8xlarge", [61440, 32768])
  // instanceSizes.put("c3.large", [3840, 2048])
  // instanceSizes.put("c3.xlarge", [7680, 4096])
  // instanceSizes.put("c4.2xlarge", [15360, 8192])
  // instanceSizes.put("c4.4xlarge", [30720, 16384])
  // instanceSizes.put("c4.8xlarge", [61440, 36864])
  // instanceSizes.put("c4.large", [3840, 2048])
  // instanceSizes.put("c4.xlarge", [7680, 4096])
  instanceSizes.put("c5.12xlarge", [98304, 49152])
  instanceSizes.put("c5.18xlarge", [147456, 73728])
  instanceSizes.put("c5.24xlarge", [196608, 98304])
  instanceSizes.put("c5.2xlarge", [16384, 8192])
  instanceSizes.put("c5.4xlarge", [32768, 16384])
  instanceSizes.put("c5.9xlarge", [73728, 36864])
  instanceSizes.put("c5.large", [4096, 2048])
  instanceSizes.put("c5.metal", [196608, 98304])
  instanceSizes.put("c5.xlarge", [8192, 4096])
  instanceSizes.put("c5a.12xlarge", [98304, 49152])
  instanceSizes.put("c5a.16xlarge", [131072, 65536])
  instanceSizes.put("c5a.24xlarge", [196608, 98304])
  instanceSizes.put("c5a.2xlarge", [16384, 8192])
  instanceSizes.put("c5a.4xlarge", [32768, 16384])
  instanceSizes.put("c5a.8xlarge", [65536, 32768])
  instanceSizes.put("c5a.large", [4096, 2048])
  instanceSizes.put("c5a.xlarge", [8192, 4096])
  instanceSizes.put("c5d.12xlarge", [98304, 49152])
  instanceSizes.put("c5d.18xlarge", [147456, 73728])
  instanceSizes.put("c5d.24xlarge", [196608, 98304])
  instanceSizes.put("c5d.2xlarge", [16384, 8192])
  instanceSizes.put("c5d.4xlarge", [32768, 16384])
  instanceSizes.put("c5d.9xlarge", [73728, 36864])
  instanceSizes.put("c5d.large", [4096, 2048])
  instanceSizes.put("c5d.metal", [196608, 98304])
  instanceSizes.put("c5d.xlarge", [8192, 4096])
  // instanceSizes.put("c5n.18xlarge", [196608, 73728])
  // instanceSizes.put("c5n.2xlarge", [21504, 8192])
  // instanceSizes.put("c5n.4xlarge", [43008, 16384])
  // instanceSizes.put("c5n.9xlarge", [98304, 36864])
  // instanceSizes.put("c5n.large", [5376, 2048])
  // instanceSizes.put("c5n.metal", [196608, 73728])
  // instanceSizes.put("c5n.xlarge", [10752, 4096])
  // instanceSizes.put("c6g.12xlarge", [98304, 49152])
  // instanceSizes.put("c6g.16xlarge", [131072, 65536])
  // instanceSizes.put("c6g.2xlarge", [16384, 8192])
  // instanceSizes.put("c6g.4xlarge", [32768, 16384])
  // instanceSizes.put("c6g.8xlarge", [65536, 32768])
  // instanceSizes.put("c6g.large", [4096, 2048])
  // instanceSizes.put("c6g.medium", [2048, 1024])
  // instanceSizes.put("c6g.metal", [131072, 65536])
  // instanceSizes.put("c6g.xlarge", [8192, 4096])
  instanceSizes.put("cc2.8xlarge", [61952, 32768])
  instanceSizes.put("cr1.8xlarge", [249856, 32768])
  instanceSizes.put("d2.2xlarge", [62464, 8192])
  instanceSizes.put("d2.4xlarge", [124928, 16384])
  instanceSizes.put("d2.8xlarge", [249856, 36864])
  instanceSizes.put("d2.xlarge", [31232, 4096])
  // instanceSizes.put("f1.16xlarge", [999424, 65536])
  // instanceSizes.put("f1.2xlarge", [124928, 8192])
  // instanceSizes.put("f1.4xlarge", [249856, 16384])
  instanceSizes.put("g2.2xlarge", [15360, 8192])
  instanceSizes.put("g2.8xlarge", [61440, 32768])
  // instanceSizes.put("g3.16xlarge", [499712, 65536])
  // instanceSizes.put("g3.4xlarge", [124928, 16384])
  // instanceSizes.put("g3.8xlarge", [249856, 32768])
  // instanceSizes.put("g3s.xlarge", [31232, 4096])
  // instanceSizes.put("g4dn.12xlarge", [196608, 49152])
  // instanceSizes.put("g4dn.16xlarge", [262144, 65536])
  // instanceSizes.put("g4dn.2xlarge", [32768, 8192])
  // instanceSizes.put("g4dn.4xlarge", [65536, 16384])
  // instanceSizes.put("g4dn.8xlarge", [131072, 32768])
  // instanceSizes.put("g4dn.metal", [393216, 98304])
  // instanceSizes.put("g4dn.xlarge", [16384, 4096])
  instanceSizes.put("h1.16xlarge", [262144, 65536])
  instanceSizes.put("h1.2xlarge", [32768, 8192])
  instanceSizes.put("h1.4xlarge", [65536, 16384])
  instanceSizes.put("h1.8xlarge", [131072, 32768])
  instanceSizes.put("hs1.8xlarge", [119808, 16384])
  // instanceSizes.put("i2.2xlarge", [62464, 8192])
  // instanceSizes.put("i2.4xlarge", [124928, 16384])
  // instanceSizes.put("i2.8xlarge", [249856, 32768])
  // instanceSizes.put("i2.xlarge", [31232, 4096])
  instanceSizes.put("i3.16xlarge", [499712, 65536])
  instanceSizes.put("i3.2xlarge", [62464, 8192])
  instanceSizes.put("i3.4xlarge", [124928, 16384])
  instanceSizes.put("i3.8xlarge", [249856, 32768])
  instanceSizes.put("i3.large", [15616, 2048])
  instanceSizes.put("i3.metal", [524288, 65536])
  instanceSizes.put("i3.xlarge", [31232, 4096])
  instanceSizes.put("i3en.12xlarge", [393216, 49152])
  instanceSizes.put("i3en.24xlarge", [786432, 98304])
  instanceSizes.put("i3en.2xlarge", [65536, 8192])
  instanceSizes.put("i3en.3xlarge", [98304, 12288])
  instanceSizes.put("i3en.6xlarge", [196608, 24576])
  instanceSizes.put("i3en.large", [16384, 2048])
  instanceSizes.put("i3en.metal", [786432, 98304])
  instanceSizes.put("i3en.xlarge", [32768, 4096])
  // instanceSizes.put("inf1.24xlarge", [196608, 98304])
  // instanceSizes.put("inf1.2xlarge", [16384, 8192])
  // instanceSizes.put("inf1.6xlarge", [49152, 24576])
  // instanceSizes.put("inf1.xlarge", [8192, 4096])
  // instanceSizes.put("m1.large", [7680, 2048])
  // instanceSizes.put("m1.medium", [3840, 1024])
  // instanceSizes.put("m1.small", [1740, 1024])
  // instanceSizes.put("m1.xlarge", [15360, 4096])
  // instanceSizes.put("m2.2xlarge", [35020, 4096])
  // instanceSizes.put("m2.4xlarge", [70041, 8192])
  // instanceSizes.put("m2.xlarge", [17510, 2048])
  // instanceSizes.put("m3.2xlarge", [30720, 8192])
  // instanceSizes.put("m3.large", [7680, 2048])
  // instanceSizes.put("m3.medium", [3840, 1024])
  // instanceSizes.put("m3.xlarge", [15360, 4096])
  // instanceSizes.put("m4.10xlarge", [163840, 40960])
  // instanceSizes.put("m4.16xlarge", [262144, 65536])
  // instanceSizes.put("m4.2xlarge", [32768, 8192])
  // instanceSizes.put("m4.4xlarge", [65536, 16384])
  // instanceSizes.put("m4.large", [8192, 2048])
  // instanceSizes.put("m4.xlarge", [16384, 4096])
  instanceSizes.put("m5.12xlarge", [196608, 49152])
  instanceSizes.put("m5.16xlarge", [262144, 65536])
  instanceSizes.put("m5.24xlarge", [393216, 98304])
  instanceSizes.put("m5.2xlarge", [32768, 8192])
  instanceSizes.put("m5.4xlarge", [65536, 16384])
  instanceSizes.put("m5.8xlarge", [131072, 32768])
  instanceSizes.put("m5.large", [8192, 2048])
  instanceSizes.put("m5.metal", [393216, 98304])
  instanceSizes.put("m5.xlarge", [16384, 4096])
  instanceSizes.put("m5a.12xlarge", [196608, 49152])
  instanceSizes.put("m5a.16xlarge", [262144, 65536])
  instanceSizes.put("m5a.24xlarge", [393216, 98304])
  instanceSizes.put("m5a.2xlarge", [32768, 8192])
  instanceSizes.put("m5a.4xlarge", [65536, 16384])
  instanceSizes.put("m5a.8xlarge", [131072, 32768])
  instanceSizes.put("m5a.large", [8192, 2048])
  instanceSizes.put("m5a.xlarge", [16384, 4096])
  instanceSizes.put("m5ad.12xlarge", [196608, 49152])
  instanceSizes.put("m5ad.24xlarge", [393216, 98304])
  instanceSizes.put("m5ad.2xlarge", [32768, 8192])
  instanceSizes.put("m5ad.4xlarge", [65536, 16384])
  instanceSizes.put("m5ad.large", [8192, 2048])
  instanceSizes.put("m5ad.xlarge", [16384, 4096])
  instanceSizes.put("m5d.12xlarge", [196608, 49152])
  instanceSizes.put("m5d.16xlarge", [262144, 65536])
  instanceSizes.put("m5d.24xlarge", [393216, 98304])
  instanceSizes.put("m5d.2xlarge", [32768, 8192])
  instanceSizes.put("m5d.4xlarge", [65536, 16384])
  instanceSizes.put("m5d.8xlarge", [131072, 32768])
  instanceSizes.put("m5d.large", [8192, 2048])
  instanceSizes.put("m5d.metal", [393216, 98304])
  instanceSizes.put("m5d.xlarge", [16384, 4096])
  instanceSizes.put("m5dn.12xlarge", [196608, 49152])
  instanceSizes.put("m5dn.16xlarge", [262144, 65536])
  instanceSizes.put("m5dn.24xlarge", [393216, 98304])
  instanceSizes.put("m5dn.2xlarge", [32768, 8192])
  instanceSizes.put("m5dn.4xlarge", [65536, 16384])
  instanceSizes.put("m5dn.8xlarge", [131072, 32768])
  instanceSizes.put("m5dn.large", [8192, 2048])
  instanceSizes.put("m5dn.metal", [393216, 98304])
  instanceSizes.put("m5dn.xlarge", [16384, 4096])
  instanceSizes.put("m5n.12xlarge", [196608, 49152])
  instanceSizes.put("m5n.16xlarge", [262144, 65536])
  instanceSizes.put("m5n.24xlarge", [393216, 98304])
  instanceSizes.put("m5n.2xlarge", [32768, 8192])
  instanceSizes.put("m5n.4xlarge", [65536, 16384])
  instanceSizes.put("m5n.8xlarge", [131072, 32768])
  instanceSizes.put("m5n.large", [8192, 2048])
  instanceSizes.put("m5n.metal", [393216, 98304])
  instanceSizes.put("m5n.xlarge", [16384, 4096])
  // instanceSizes.put("m6g.12xlarge", [196608, 49152])
  // instanceSizes.put("m6g.16xlarge", [262144, 65536])
  // instanceSizes.put("m6g.2xlarge", [32768, 8192])
  // instanceSizes.put("m6g.4xlarge", [65536, 16384])
  // instanceSizes.put("m6g.8xlarge", [131072, 32768])
  // instanceSizes.put("m6g.large", [8192, 2048])
  // instanceSizes.put("m6g.medium", [4096, 1024])
  // instanceSizes.put("m6g.metal", [262144, 65536])
  // instanceSizes.put("m6g.xlarge", [16384, 4096])
  // instanceSizes.put("p2.16xlarge", [749568, 65536])
  // instanceSizes.put("p2.8xlarge", [499712, 32768])
  // instanceSizes.put("p2.xlarge", [62464, 4096])
  // instanceSizes.put("p3.16xlarge", [499712, 65536])
  // instanceSizes.put("p3.2xlarge", [62464, 8192])
  // instanceSizes.put("p3.8xlarge", [249856, 32768])
  // instanceSizes.put("p3dn.24xlarge", [786432, 98304])
  // instanceSizes.put("r3.2xlarge", [62464, 8192])
  // instanceSizes.put("r3.4xlarge", [124928, 16384])
  // instanceSizes.put("r3.8xlarge", [249856, 32768])
  // instanceSizes.put("r3.large", [15616, 2048])
  // instanceSizes.put("r3.xlarge", [31232, 4096])
  // instanceSizes.put("r4.16xlarge", [499712, 65536])
  // instanceSizes.put("r4.2xlarge", [62464, 8192])
  // instanceSizes.put("r4.4xlarge", [124928, 16384])
  // instanceSizes.put("r4.8xlarge", [249856, 32768])
  // instanceSizes.put("r4.large", [15616, 2048])
  // instanceSizes.put("r4.xlarge", [31232, 4096])
  instanceSizes.put("r5.12xlarge", [393216, 49152])
  instanceSizes.put("r5.16xlarge", [524288, 65536])
  instanceSizes.put("r5.24xlarge", [786432, 98304])
  instanceSizes.put("r5.2xlarge", [65536, 8192])
  instanceSizes.put("r5.4xlarge", [131072, 16384])
  instanceSizes.put("r5.8xlarge", [262144, 32768])
  instanceSizes.put("r5.large", [16384, 2048])
  instanceSizes.put("r5.metal", [786432, 98304])
  instanceSizes.put("r5.xlarge", [32768, 4096])
  instanceSizes.put("r5a.12xlarge", [393216, 49152])
  instanceSizes.put("r5a.16xlarge", [524288, 65536])
  instanceSizes.put("r5a.24xlarge", [786432, 98304])
  instanceSizes.put("r5a.2xlarge", [65536, 8192])
  instanceSizes.put("r5a.4xlarge", [131072, 16384])
  instanceSizes.put("r5a.8xlarge", [262144, 32768])
  instanceSizes.put("r5a.large", [16384, 2048])
  instanceSizes.put("r5a.xlarge", [32768, 4096])
  instanceSizes.put("r5ad.12xlarge", [393216, 49152])
  instanceSizes.put("r5ad.24xlarge", [786432, 98304])
  instanceSizes.put("r5ad.2xlarge", [65536, 8192])
  instanceSizes.put("r5ad.4xlarge", [131072, 16384])
  instanceSizes.put("r5ad.large", [16384, 2048])
  instanceSizes.put("r5ad.xlarge", [32768, 4096])
  instanceSizes.put("r5d.12xlarge", [393216, 49152])
  instanceSizes.put("r5d.16xlarge", [524288, 65536])
  instanceSizes.put("r5d.24xlarge", [786432, 98304])
  instanceSizes.put("r5d.2xlarge", [65536, 8192])
  instanceSizes.put("r5d.4xlarge", [131072, 16384])
  instanceSizes.put("r5d.8xlarge", [262144, 32768])
  instanceSizes.put("r5d.large", [16384, 2048])
  instanceSizes.put("r5d.metal", [786432, 98304])
  instanceSizes.put("r5d.xlarge", [32768, 4096])
  // instanceSizes.put("r5dn.12xlarge", [393216, 49152])
  // instanceSizes.put("r5dn.16xlarge", [524288, 65536])
  // instanceSizes.put("r5dn.24xlarge", [786432, 98304])
  // instanceSizes.put("r5dn.2xlarge", [65536, 8192])
  // instanceSizes.put("r5dn.4xlarge", [131072, 16384])
  // instanceSizes.put("r5dn.8xlarge", [262144, 32768])
  // instanceSizes.put("r5dn.large", [16384, 2048])
  // instanceSizes.put("r5dn.metal", [786432, 98304])
  // instanceSizes.put("r5dn.xlarge", [32768, 4096])
  // instanceSizes.put("r5n.12xlarge", [393216, 49152])
  // instanceSizes.put("r5n.16xlarge", [524288, 65536])
  // instanceSizes.put("r5n.24xlarge", [786432, 98304])
  // instanceSizes.put("r5n.2xlarge", [65536, 8192])
  // instanceSizes.put("r5n.4xlarge", [131072, 16384])
  // instanceSizes.put("r5n.8xlarge", [262144, 32768])
  // instanceSizes.put("r5n.large", [16384, 2048])
  // instanceSizes.put("r5n.metal", [786432, 98304])
  // instanceSizes.put("r5n.xlarge", [32768, 4096])
  // instanceSizes.put("r6g.12xlarge", [393216, 49152])
  // instanceSizes.put("r6g.16xlarge", [524288, 65536])
  // instanceSizes.put("r6g.2xlarge", [65536, 8192])
  // instanceSizes.put("r6g.4xlarge", [131072, 16384])
  // instanceSizes.put("r6g.8xlarge", [262144, 32768])
  // instanceSizes.put("r6g.large", [16384, 2048])
  // instanceSizes.put("r6g.medium", [8192, 1024])
  // instanceSizes.put("r6g.metal", [524288, 65536])
  // instanceSizes.put("r6g.xlarge", [32768, 4096])
  // instanceSizes.put("t1.micro", [627, 1024])
  // instanceSizes.put("t2.2xlarge", [32768, 8192])
  // instanceSizes.put("t2.large", [8192, 2048])
  // instanceSizes.put("t2.medium", [4096, 2048])
  // instanceSizes.put("t2.micro", [1024, 1024])
  // instanceSizes.put("t2.nano", [512, 1024])
  // instanceSizes.put("t2.small", [2048, 1024])
  // instanceSizes.put("t2.xlarge", [16384, 4096])
  instanceSizes.put("t3.2xlarge", [32768, 8192])
  instanceSizes.put("t3.large", [8192, 2048])
  instanceSizes.put("t3.medium", [4096, 2048])
  instanceSizes.put("t3.micro", [1024, 2048])
  instanceSizes.put("t3.nano", [512, 2048])
  instanceSizes.put("t3.small", [2048, 2048])
  instanceSizes.put("t3.xlarge", [16384, 4096])
  instanceSizes.put("t3a.2xlarge", [32768, 8192])
  instanceSizes.put("t3a.large", [8192, 2048])
  instanceSizes.put("t3a.medium", [4096, 2048])
  instanceSizes.put("t3a.micro", [1024, 2048])
  instanceSizes.put("t3a.nano", [512, 2048])
  instanceSizes.put("t3a.small", [2048, 2048])
  instanceSizes.put("t3a.xlarge", [16384, 4096])
  // instanceSizes.put("u-12tb1.metal", [12582912, 458752])
  // instanceSizes.put("u-18tb1.metal", [18874368, 458752])
  // instanceSizes.put("u-24tb1.metal", [25165824, 458752])
  // instanceSizes.put("u-6tb1.metal", [6291456, 458752])
  // instanceSizes.put("u-9tb1.metal", [9437184, 458752])
  instanceSizes.put("x1.16xlarge", [999424, 65536])
  instanceSizes.put("x1.32xlarge", [1998848, 131072])
  instanceSizes.put("x1e.16xlarge", [1998848, 65536])
  instanceSizes.put("x1e.2xlarge", [249856, 8192])
  instanceSizes.put("x1e.32xlarge", [3997696, 131072])
  instanceSizes.put("x1e.4xlarge", [499712, 16384])
  instanceSizes.put("x1e.8xlarge", [999424, 32768])
  instanceSizes.put("x1e.xlarge", [124928, 4096])
  instanceSizes.put("z1d.12xlarge", [393216, 49152])
  instanceSizes.put("z1d.2xlarge", [65536, 8192])
  instanceSizes.put("z1d.3xlarge", [98304, 12288])
  instanceSizes.put("z1d.6xlarge", [196608, 24576])
  instanceSizes.put("z1d.large", [16384, 2048])
  instanceSizes.put("z1d.metal", [393216, 49152])
  instanceSizes.put("z1d.xlarge", [32768, 4096])

  return instanceSizes
}
